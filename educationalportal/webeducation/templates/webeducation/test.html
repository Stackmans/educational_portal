{% extends 'base.html' %}
{% load static %}

{% block main_content %}
<script>
    var timeLeft = {{ time_left }};  // Отримання значення time_left з контексту від вигляду
    var timer = setInterval(function() {
        if (timeLeft <= 0) {
            clearInterval(timer);
            document.getElementById("timer").innerHTML = "Час вийшов!";
            document.getElementById("quizForm").submit();  // Автоматичне відправлення форми при закінченні часу
        } else {
            document.getElementById("timer").innerHTML = timeLeft + " с";
            timeLeft -= 1;
        }
    }, 1000);
</script>

<form id="quizForm" method="POST" action="{% url 'solve_quiz' subject.id quiz.id %}">

    {% csrf_token %}
    {% for question in quiz.questions.all %}
    <div class="card mt-4" >
        <div class="card-body" style="background-color: #b59a7a;">
            <h3>{{ question.question_text }}</h3>
            <ul>
                {% for option in question.options.all %}
                <li>
                    <input type="radio" id="option_{{ option.id }}" name="question_{{ question.id }}" value="{{ option.id }}">
                    <label for="option_{{ option.id }}">{{ option.text }}</label>
                </li>
                {% endfor %}
            </ul>
        </div>
    </div>
    {% endfor %}
    <span id="timer"></span>
    <button type="submit">Submit</button>
</form>
{% endblock %}
